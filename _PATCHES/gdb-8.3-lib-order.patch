Fix link order due to library interdependency

From: Orgad Shaneh <orgads@gmail.com>

From
   <https://github.com/msys2/MINGW-packages/blob/master/mingw-w64-gdb/gdb-8.3-lib-order.patch>

From 699d1bec385c16261eb9fe3de0f71a8cafc73082 Mon Sep 17 00:00:00 2001
Subject: [PATCH] Fix link order on Windows

libgnu uses ntop, which comes from ws2_32 library, so ws2_32 needs
to be linked after libgnu.
---
 gdb/Makefile.in       |    7 ++++---
 gdbserver/Makefile.in |    4 ++--
 2 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/gdb/Makefile.in b/gdb/Makefile.in
index ec371fc7..8f9d27ff 100644
--- a/gdb/Makefile.in
+++ b/gdb/Makefile.in
@@ -626,9 +626,9 @@ CLIBS = $(SIM) $(READLINE) $(OPCODES) $(LIBCTF) $(BFD) $(ZLIB) \
 	$(XM_CLIBS) $(GDBTKLIBS) \
 	@LIBS@ @GUILE_LIBS@ @PYTHON_LIBS@ \
 	$(LIBEXPAT) $(LIBLZMA) $(LIBBABELTRACE) $(LIBIPT) \
-	$(WIN32LIBS) $(LIBGNU) $(LIBICONV) \
+	$(LIBGNU) $(LIBICONV) \
 	$(LIBMPFR) $(SRCHIGH_LIBS) $(LIBXXHASH) $(PTHREAD_LIBS) \
-	$(DEBUGINFOD_LIBS)
+	$(DEBUGINFOD_LIBS) $(WIN32LIBS)
 CDEPS = $(NAT_CDEPS) $(SIM) $(BFD) $(READLINE_DEPS) $(CTF_DEPS) \
 	$(OPCODES) $(INTL_DEPS) $(LIBIBERTY) $(CONFIG_DEPS) $(LIBGNU) \
 	$(LIBSUPPORT)
@@ -1864,8 +1864,9 @@ libgdb.a: $(LIBGDB_OBS)
 # Removing the old gdb first works better if it is running, at least on SunOS.
 gdb$(EXEEXT): gdb.o $(LIBGDB_OBS) $(CDEPS) $(TDEPLIBS)
 	$(SILENCE) rm -f gdb$(EXEEXT)
-	$(ECHO_CXXLD) $(CC_LD) $(INTERNAL_LDFLAGS) $(WIN32LDAPP) \
+	$(ECHO_CXXLD) $(CC_LD) $(WIN32LDAPP) \
 		-o gdb$(EXEEXT) gdb.o $(LIBGDB_OBS) \
+		$(INTERNAL_LDFLAGS) \
 		$(TDEPLIBS) $(TUI_LIBRARY) $(CLIBS) $(LOADLIBES)
 ifneq ($(CODESIGN_CERT),)
 	$(ECHO_SIGN) $(CODESIGN) -s $(CODESIGN_CERT) gdb$(EXEEXT)
diff --git a/gdbserver/Makefile.in b/gdbserver/Makefile.in
index 2bd3a578..3484a655 100644
--- a/gdbserver/Makefile.in
+++ b/gdbserver/Makefile.in
@@ -352,9 +352,9 @@ clean-info:
 gdbserver$(EXEEXT): $(sort $(OBS)) ${CDEPS} $(LIBGNU) $(LIBIBERTY) \
 		$(INTL_DEPS) $(GDBSUPPORT)
 	$(SILENCE) rm -f gdbserver$(EXEEXT)
-	$(ECHO_CXXLD) $(CC_LD) $(INTERNAL_CFLAGS) $(INTERNAL_LDFLAGS) \
+	$(ECHO_CXXLD) $(CC_LD) $(INTERNAL_CFLAGS) \
 		-o gdbserver$(EXEEXT) $(OBS) $(GDBSUPPORT) $(LIBGNU) \
-		$(LIBIBERTY) $(INTL) $(GDBSERVER_LIBS) $(XM_CLIBS) \
+		$(LIBIBERTY) $(INTL) $(INTERNAL_LDFLAGS) $(GDBSERVER_LIBS) $(XM_CLIBS) \
 		$(WIN32APILIBS)
 
 gdbreplay$(EXEEXT): $(sort $(GDBREPLAY_OBS)) $(LIBGNU) $(LIBIBERTY) \
